<?php

/*
 * soluble-flexstore library
 *
 * @author    Vanvelthem Sébastien
 * @link      https://github.com/belgattitude/soluble-flexstore
 * @copyright Copyright (c) 2016-2017 Vanvelthem Sébastien
 * @license   MIT License https://github.com/belgattitude/soluble-flexstore/blob/master/LICENSE.md
 *
 */

namespace SolubleTest\FlexStore\Column;

use PHPUnit\Framework\TestCase;
use Soluble\FlexStore\Column\ColumnType;

/**
 * Generated by PHPUnit_SkeletonGenerator on 2014-10-03 at 11:32:13.
 */
class ColumnTypeTest extends TestCase
{
    /**
     * @var ColumnType
     */
    protected $type;

    /**
     * Sets up the fixture, for example, opens a network connection.
     * This method is called before a test is executed.
     */
    protected function setUp(): void
    {
        $this->type = new ColumnType();
    }

    public function testCreate()
    {
        self::assertEquals(ColumnType::TYPE_STRING, ColumnType::createType(ColumnType::TYPE_STRING)->getName());
        self::assertEquals(ColumnType::TYPE_INTEGER, ColumnType::createType(ColumnType::TYPE_INTEGER)->getName());
        self::assertEquals(ColumnType::TYPE_BIT, ColumnType::createType(ColumnType::TYPE_BIT)->getName());
        self::assertEquals(ColumnType::TYPE_BLOB, ColumnType::createType(ColumnType::TYPE_BLOB)->getName());
        self::assertEquals(ColumnType::TYPE_BOOLEAN, ColumnType::createType(ColumnType::TYPE_BOOLEAN)->getName());
        self::assertEquals(ColumnType::TYPE_DATE, ColumnType::createType(ColumnType::TYPE_DATE)->getName());
        self::assertEquals(ColumnType::TYPE_DATETIME, ColumnType::createType(ColumnType::TYPE_DATETIME)->getName());
        self::assertEquals(ColumnType::TYPE_DECIMAL, ColumnType::createType(ColumnType::TYPE_DECIMAL)->getName());
        self::assertEquals(ColumnType::TYPE_TIME, ColumnType::createType(ColumnType::TYPE_TIME)->getName());
    }

    public function testCreateThrowsInvalidArgumentException()
    {
        $this->expectException('Soluble\FlexStore\Column\Exception\InvalidArgumentException');
        ColumnType::createType('not_a_valid_type_name');
    }

    public function testAll()
    {
        $supported = ColumnType::getSupported();
        foreach ($supported as $type_name) {
            $type = ColumnType::createType($type_name);
            self::assertInstanceOf('Soluble\FlexStore\Column\Type\AbstractType', $type);
            self::assertEquals($type_name, $type->getName());
        }
    }

    public function testIsSupported()
    {
        self::assertTrue(ColumnType::isSupported(ColumnType::TYPE_BIT));
        self::assertFalse(ColumnType::isSupported('cool'));
    }
}
